# Инструкция по созданию PRD для AI агента (Продакт Овнер)

## Назначение папки

В папке `.cursor/prds/` хранятся **Product Requirements Documents (PRD)** для новых фичей проекта. 

Процесс работы:
1. **AI агент (Продакт Овнер)** создаёт PRD в этой папке по данной инструкции
2. **Человек-Cofounder** проверяет PRD визуально
3. **AI агент (разработчик Cursor)** реализует фичу по проверенному PRD

## Структура PRD

Каждый PRD должен быть сохранён как отдельный файл Markdown с понятным названием (например, `2025-11-01_feature-calendar-export.md` или `2025-11-02_feature-vacation-calculator.md`). В начале год-месяц-день создания PRD — сегодняшняя дата.

PRD должен содержать следующие обязательные разделы:

### 1. Обзор фичи (Overview)

- **Название фичи**: краткое и понятное название
- **Цель**: зачем нужна эта фича, какую проблему решает
- **Целевая аудитория**: кому предназначена фича
- **Приоритет**: высокий / средний / низкий (опционально)

### 2. Пользовательские истории (User Stories)

Опиши пользовательские истории в формате:
```
Как [роль пользователя]
Я хочу [действие/функциональность]
Чтобы [результат/выгода]
```

Пример:
```
Как пользователь калькулятора
Я хочу экспортировать результаты расчёта в PDF
Чтобы сохранить их для дальнейшего использования
```

### 3. Функциональные требования (Functional Requirements)

Детальное описание того, что должна делать фича:

- Основной функционал
- Дополнительные возможности
- Границы фичи (что НЕ входит в scope)
- Особые случаи (edge cases)

### 4. Критерии приемки (Acceptance Criteria)

Чек-лист конкретных и измеримых условий, при выполнении которых фича считается готовой:

- [ ] Критерий 1
- [ ] Критерий 2
- [ ] Критерий 3

**Важно для разработчика**: 
- Критерии приемки должны быть покрыты тестами (по возможности). Если критерий нельзя покрыть автоматическим тестом (например, UI/UX проверка), разработчик должен проверить его вручную через браузер.
- Разработчик обязан сам проверить выполнение всех критериев приемки перед завершением работы.

### 5. Технические требования (Technical Requirements)

#### 5.1. Архитектура и структура

- Какие новые компоненты нужно создать
- Какие существующие компоненты нужно модифицировать
- Структура данных и модели (можно описать интерфейсы TypeScript, но без реализации)
- Изменения в роутинге (если нужна новая страница)

#### 5.2. UI/UX требования

- Описание интерфейса и пользовательского опыта
- Адаптивность: фича должна корректно работать на десктопе и мобильных устройствах (50/50 распределение пользователей)
- Интеграция с существующими компонентами (Layout, Sidebar, Header, Footer)
- Если нужно добавить в навигацию — указать, в какую секцию Sidebar

#### 5.3. Бизнес-логика

- Алгоритмы и расчёты (можно описать псевдокодом, но без полной реализации)
- Утилиты и вспомогательные функции
- Обработка данных

#### 5.4. Зависимости

- Новые npm-пакеты, если нужны (указать название и версию, если важно)
- Использование pnpm (не npm!) как менеджера пакетов

### 6. Тестирование (Testing Requirements)

- Какие тесты нужно написать
- Какие edge cases нужно покрыть тестами
- Типы тестов (unit, integration)
- Моки данных, если нужны
- Связь с критериями приемки: какие критерии приемки можно покрыть автоматическими тестами

**Важно**: 
- Вся новая логика должна быть покрыта тестами.
- Критерии приемки из раздела 4 должны быть покрыты тестами (где возможно) или проверены вручную разработчиком.

### 7. API и данные (Data & API)

- Структура данных (можно описать через интерфейсы TypeScript)
- Форматы данных для моков (если нужны)
- Спецификация API (если фича предполагает работу с API)

### 8. Примеры и моки (Examples & Mocks)

- Примеры входных данных
- Примеры ожидаемых результатов
- Описание структуры моков (если нужны)

## Что НЕ включать в PRD

- **Готовый код**: не пиши полную реализацию, только описание структуры
- **Accessibility**: избыточно на текущий момент
- **Оценку времени**: не имеет практического смысла
- **Детали стилизации**: общие требования по UI достаточно, конкретные классы Tailwind оставь разработчику

## Что можно включить в PRD

- Типы данных и интерфейсы TypeScript (описание структуры)
- Псевдокод алгоритмов (лучше оставить разработчику)
- API спецификации
- Описание структуры компонентов (без реализации)
- Моки данных (структура)

## Контекст проекта

При создании PRD учитывай:

### Структура проекта

Структура описана в `.cursor/rules/01-project-arch.md`

### Технологический стек

- React + TypeScript
- React Router для роутинга
- Tailwind CSS для стилей
- pnpm для управления пакетами

### Существующие фичи

- Калькулятор суммы оффера (главная страница `/`)
- Калькулятор с региональным коэффициентом (`/rk-sn`)
- Производственный календарь (`/work-calendar`)
- Статьи (раздел `/articles/`)

### Компоненты Layout

- Все страницы обёрнуты в `Layout` (`src/components/common/Layout.tsx`)
- Sidebar — навигация (десктоп: всегда виден слева, мобилка: overlay)
- Header — только на мобильных
- Main — главная зона контента
- Footer — только на мобильных

## Чек-лист готовности PRD

Перед сохранением PRD убедись:

- [ ] Все обязательные разделы заполнены
- [ ] Пользовательские истории понятны и полны
- [ ] Критерии приемки конкретны и измеримы (сформулированы так, чтобы их можно было проверить)
- [ ] Технические требования детализированы
- [ ] Описана стратегия тестирования (связь с критериями приемки указана)
- [ ] Учтена адаптивность (десктоп + мобилка)
- [ ] Описана интеграция с существующими компонентами
- [ ] Указаны зависимости (если нужны)
- [ ] Нет готового кода реализации
- [ ] PRD готов для передачи разработчику

## Пример структуры PRD

```markdown
# PRD: Название фичи

## 1. Обзор фичи
...

## 2. Пользовательские истории
...

## 3. Функциональные требования
...

## 4. Критерии приемки
...

## 5. Технические требования
### 5.1. Архитектура и структура
### 5.2. UI/UX требования
### 5.3. Бизнес-логика
### 5.4. Зависимости

## 6. Тестирование
...

## 7. API и данные
...

## 8. Примеры и моки
...
```

## Важные принципы

1. **Детальность**: PRD должен быть достаточно детальным, чтобы разработчик понял, что именно нужно сделать, но без готового кода
2. **Конкретность**: избегай расплывчатых формулировок, используй конкретные примеры
3. **Структурированность**: следуй описанной структуре для единообразия
4. **Контекст проекта**: учитывай существующую архитектуру и компоненты
5. **Тестируемость**: опиши, как можно проверить, что фича работает корректно

## Следующие шаги после создания PRD

1. PRD сохраняется в `.cursor/plans/`
2. Человек-Cofounder проверяет PRD
3. После проверки PRD передаётся AI агенту-разработчику через команду из `.cursor/commands/new-feature-dev.md`
4. Разработчик реализует фичу по PRD:
   - Покрывает критерии приемки тестами (где возможно)
   - Проверяет критерии приемки вручную через браузер (где автоматизация невозможна)
   - Убеждается, что все критерии приемки выполнены перед завершением работы

